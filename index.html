<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>IA Trading Visual</title>

<style>
:root{
  --bg:#020617;
  --panel:rgba(255,255,255,.05);
  --border:rgba(255,255,255,.12);
  --accent:#22c55e;
  --info:#38bdf8;
  --warn:#facc15;
  --danger:#f87171;
  --text:#e5e7eb;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:radial-gradient(circle at top,#0f172a,#020617);
  font-family:system-ui,-apple-system,Segoe UI;
  color:var(--text);
}

.container{
  max-width:900px;
  margin:40px auto;
  padding:20px;
}

h1{
  text-align:center;
  font-weight:600;
  letter-spacing:1px;
}

.card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:20px;
  padding:24px;
  margin-top:24px;
  backdrop-filter:blur(16px);
}

.upload-zone{
  border:2px dashed var(--border);
  border-radius:24px;
  padding:50px 20px;
  text-align:center;
  transition:.3s;
}

.upload-zone:hover{
  border-color:var(--accent);
}

input[type=file]{display:none}

label{
  display:inline-block;
  padding:16px 32px;
  border-radius:999px;
  background:linear-gradient(135deg,#22c55e,#4ade80);
  color:#052e16;
  font-weight:700;
  cursor:pointer;
}

button{
  margin-top:20px;
  width:100%;
  padding:18px;
  border-radius:999px;
  border:none;
  background:linear-gradient(135deg,#38bdf8,#6366f1);
  color:#020617;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}

button:disabled{
  opacity:.5;
  cursor:not-allowed;
}

.progress{
  margin-top:20px;
  height:6px;
  background:rgba(255,255,255,.1);
  border-radius:999px;
  overflow:hidden;
  display:none;
}

.progress div{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#22c55e,#4ade80);
  transition:width .4s;
}

.results{
  display:none;
}

.badge{
  display:inline-block;
  padding:8px 20px;
  border-radius:999px;
  font-weight:700;
  margin-bottom:16px;
}

.green{background:#22c55e;color:#052e16}
.yellow{background:#facc15;color:#422006}
.red{background:#f87171;color:#450a0a}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:16px;
}

.box{
  background:rgba(0,0,0,.35);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
}

.disclaimer{
  margin-top:30px;
  text-align:center;
  font-size:12px;
  opacity:.6;
}
</style>
</head>

<body>
<div class="container">
  <h1>IA Trading Visual</h1>

  <div class="card">
    <div class="upload-zone">
      <label>
        Subir captura del mercado
        <input type="file" id="imageInput" accept="image/*">
      </label>
      <p style="opacity:.6;margin-top:12px">
        Timeframe M1 · IQ Option · Price Action
      </p>
    </div>

    <button id="analyzeBtn" disabled onclick="startAnalysis()">
      Analizar mercado
    </button>

    <div class="progress" id="progress">
      <div></div>
    </div>
  </div>

  <div class="card results" id="results">
    <span class="badge" id="decision"></span>

    <div class="grid">
      <div class="box"><strong>Escenario</strong><br><span id="scenario"></span></div>
      <div class="box"><strong>Dirección</strong><br><span id="direction"></span></div>
      <div class="box"><strong>Probabilidad</strong><br><span id="probability"></span></div>
      <div class="box"><strong>Tiempo sugerido</strong><br><span id="timeframe"></span></div>
      <div class="box"><strong>Riesgo</strong><br><span id="risk"></span></div>
    </div>
  </div>

  <div class="disclaimer">
    Esta herramienta no garantiza resultados. El trading implica riesgo.
  </div>
</div>

<script>
const input=document.getElementById("imageInput");
const btn=document.getElementById("analyzeBtn");
const progress=document.getElementById("progress");
const bar=progress.firstElementChild;
const results=document.getElementById("results");

input.addEventListener("change",()=>{
  btn.disabled=false;
});

async function startAnalysis(){
  btn.disabled=true;
  results.style.display="none";
  progress.style.display="block";
  bar.style.width="0%";

  let p=0;
  const loader=setInterval(()=>{
    p+=20;
    bar.style.width=p+"%";
    if(p>=100){
      clearInterval(loader);
      progress.style.display="none";
      sendToBackend();
    }
  },600);
}

async function sendToBackend(){
  const file=input.files[0];
  const form=new FormData();
  form.append("file",file);

  const response=await fetch("https://TU_BACKEND/analyze",{
    method:"POST",
    body:form
  });

  const data=await response.json();
  showResults(data);
}

function showResults(data){
  results.style.display="block";

  const badge=document.getElementById("decision");
  badge.textContent=data.decision;

  badge.className="badge "+
    (data.decision==="OPERAR"?"green":
     data.decision==="ESPERAR"?"yellow":"red");

  document.getElementById("scenario").textContent=
    data.direction||"Condiciones no válidas";

  document.getElementById("direction").textContent=
    data.direction||"-";

  document.getElementById("probability").textContent=
    data.probability||"-";

  document.getElementById("timeframe").textContent=
    data.timeframe||"-";

  document.getElementById("risk").textContent=
    data.risk||"-";
}
</script>
</body>
</html>
